pipeline {
        agent any
         tools {
            nodejs "NodeJS 14"
        }
        stages {
            stage('Build') {
                agent {
                    docker {
                        image 'node:18-alpine'
                        reuseNode true
                    }
                }
                steps {
                    sh '''
                        ls -la
                        node --version
                        npm --version
                        npm ci
                        npm run build
                        npm install
                        ls -la
                    '''
                }
            }
            stage('Install Dependencies') {
                steps {
                    sh 'apt-get update && apt-get install -y libatomic1' // Use the correct command for your distro
                }
            }
            stage('Run Node Application') {
                steps {
                    sh 'node your_app.js'
                }
            }
            stage('Test') {
                    steps {
                        echo 'Test Stage'
                        sh '''
                            npm test
                            test -f build/robots.txt
                            cat build/robots.txt
                            grep="Disallow"
                        '''
                    }
            }
                    
                
        }
}
            



