pipeline {
        agent any
        stages {
            stage('Build') {
                agent {
                    docker {
                        image 'node:18-alpine'
                        reuseNode true
                    }
                }
                steps {
                    sh '''
                        ls -la
                        node --version
                        npm --version
                        npm ci
                        npm run build
                        ls -la
                    '''
                }
            }
            stage('Test') {
                    agent {
                        tools {
                            nodejs "NodeJS 14"
                        }
                    }
                    steps {
                        echo 'Test Stage'
                        sh 'npm install'
                        sh 'test -f build/robots.txt'
                        sh 'npm test -- --grep="Disallow"'
                    }
                }
                    
                
            }
        }
            
}

pipeline {
    agent any
    tools {
        nodejs "NodeJS 14" // Use the name you configured in Global Tool Configuration
    }
    stages {
        stage('Build') {
            steps {
                sh 'npm install'
            }
        }
    }
}

